<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi Music Player</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #000;
      background-image: url('musicmiage.jpg');
      background-size: cover;
      background-position: center;
      height: 100vh;
      overflow: hidden;
    }

    header {
      position: absolute;
      top: 10px;
      width: 100%;
      text-align: center;
      z-index: 2;
    }

    header h1 {
      color: #f9c80e;
      text-shadow: 2px 2px 4px #000;
      font-size: 2.5rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .global-volume {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 18px;
      z-index: 99;
    }

    .container {
      position: absolute;
      top: 100px;
      bottom: 30px;
      left: 0;
      right: 0;
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      overflow-y: auto;
      padding: 20px;
    }

    .player {
      background-image: url('musicimg.jpg');
      background-size: cover;
      background-position: center;
      color: white;
      padding: 25px;
      border-radius: 15px;
      text-align: center;
      width: 260px;
      opacity: 0.5;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px #000;
      margin: 15px;
    }

    .player.playing {
      opacity: 1;
      transform: scale(1.08);
      z-index: 2;
    }

    h2, h3 {
      margin: 5px 0;
    }

    .controls button {
      font-size: 1.3rem;
      margin: 8px;
      padding: 8px;
      cursor: pointer;
      background: none;
      color: white;
      border: none;
    }

    .progress-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }

    .progress {
      flex: 1;
    }
  </style>
</head>
<body>

  <header>
    <h1><i>Music, the Feel of Love</i></h1>
  </header>

  <div class="global-volume">
    üîä Volume: <input type="range" id="globalVolume" min="0" max="1" step="0.01" value="1">
  </div>

  <div class="container" id="playerContainer">
    <!-- Players are dynamically inserted here -->
  </div>

  <script>
    const songs = [
      {
        title: "badtameez dil",
        artist: "Benny Dayal, Shefali Alvares",
        src: "music/song1.mp3"
      },
      {
        title: "Main Kho Gaya",
        artist: "Diljan, Kushagra, and ShowKidd",
        src: "music/song2.mp3"
      },
      {
        title: "Tum Mile",
        artist: "Pritam, Neeraj Shridhar",
        src: "music/song3.mp3"
      }
    ];

    const container = document.getElementById('playerContainer');
    const globalVolume = document.getElementById("globalVolume");

    let audio = new Audio();
    let currentPlayerIndex = -1;
    let players = [];

    globalVolume.addEventListener('input', () => {
      audio.volume = globalVolume.value;
    });

    function formatTime(sec) {
      if (isNaN(sec)) return "0:00";
      const mins = Math.floor(sec / 60);
      const secs = Math.floor(sec % 60).toString().padStart(2, '0');
      return `${mins}:${secs}`;
    }

    function createPlayer(song, index) {
      const player = document.createElement('div');
      player.classList.add('player');

      player.innerHTML = `
        <h2>${song.title}</h2>
        <h3>${song.artist}</h3>
        <div class="controls">
          <button class="prev">‚èÆ</button>
          <button class="play">‚ñ∂Ô∏è</button>
          <button class="next">‚è≠</button>
        </div>
        <div class="progress-container">
          <span class="current-time">0:00</span>
          <input type="range" class="progress" value="0">
          <span class="duration">0:00</span>
        </div>
      `;

      const playBtn = player.querySelector('.play');
      const prevBtn = player.querySelector('.prev');
      const nextBtn = player.querySelector('.next');
      const progress = player.querySelector('.progress');
      const currentTimeEl = player.querySelector('.current-time');
      const durationEl = player.querySelector('.duration');

      [playBtn, prevBtn, nextBtn].forEach(btn =>
        btn.addEventListener('click', e => e.stopPropagation())
      );

      playBtn.addEventListener('click', () => playSong(index));
      prevBtn.addEventListener('click', () => playSong((index - 1 + songs.length) % songs.length));
      nextBtn.addEventListener('click', () => playSong((index + 1) % songs.length));

      progress.addEventListener('input', () => {
        if (!isNaN(audio.duration)) {
          audio.currentTime = (progress.value / 100) * audio.duration;
        }
      });

      player.addEventListener('click', () => playSong(index));

      container.appendChild(player);

      players.push({
        player,
        playBtn,
        progress,
        currentTimeEl,
        durationEl
      });
    }

    function updatePlayerUI(index) {
      players.forEach((p, i) => {
        if (i === index) {
          p.player.classList.add('playing');
          p.playBtn.textContent = '‚è∏Ô∏è';
          centerPlayer(p.player);
        } else {
          p.player.classList.remove('playing');
          p.playBtn.textContent = '‚ñ∂Ô∏è';
        }
      });
    }

    function centerPlayer(el) {
      el.scrollIntoView({ behavior: "smooth", block: "center", inline: "center" });
    }

    function playSong(index) {
      const song = songs[index];
      audio.src = song.src;
      audio.play();
      currentPlayerIndex = index;

      updatePlayerUI(index);

      const current = players[index];

      audio.ontimeupdate = () => {
        if (!isNaN(audio.duration)) {
          current.progress.value = (audio.currentTime / audio.duration) * 100;
          current.currentTimeEl.textContent = formatTime(audio.currentTime);
          current.durationEl.textContent = formatTime(audio.duration);
        }
      };

      audio.onended = () => {
        const nextIndex = (index + 1) % songs.length;
        playSong(nextIndex);
      };
    }

    songs.forEach((song, index) => createPlayer(song, index));

    window.onload = () => {
      const middleIndex = Math.floor(songs.length / 2);
      playSong(middleIndex);
    };
  </script>
</body>
</html>
